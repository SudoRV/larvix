{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\projects\\\\larvix\\\\larvix\\\\src\\\\components\\\\FlowCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback } from \"react\";\nimport ReactFlow, { Background, Controls, addEdge, useNodesState, useEdgesState, useReactFlow } from \"reactflow\";\nimport \"reactflow/dist/style.css\";\nimport ChatNode from \"../components/ChatNode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction FlowCanvas() {\n  _s();\n  const {\n    zoomIn,\n    zoomOut,\n    setViewport,\n    getViewport\n  } = useReactFlow();\n  const handleWheel = useCallback(event => {\n    event.preventDefault();\n    const {\n      x,\n      y,\n      zoom\n    } = getViewport();\n\n    // CTRL + scroll → zoom\n    if (event.ctrlKey) {\n      event.deltaY < 0 ? zoomIn({\n        duration: 100\n      }) : zoomOut({\n        duration: 100\n      });\n      return;\n    }\n\n    // SHIFT + scroll → horizontal\n    if (event.shiftKey) {\n      setViewport({\n        x: x - event.deltaY,\n        y,\n        zoom\n      });\n      return;\n    }\n\n    // Normal scroll → vertical\n    setViewport({\n      x,\n      y: y - event.deltaY,\n      zoom\n    });\n  }, [getViewport, setViewport, zoomIn, zoomOut]);\n  const nodeTypes = {\n    chat: ChatNode\n  };\n  const initialNodes = [{\n    id: \"1\",\n    type: \"chat\",\n    position: {\n      x: 400,\n      y: 100\n    },\n    data: {\n      label: \"Root message\"\n    }\n  }];\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n  const onConnect = useCallback(params => setEdges(eds => addEdge({\n    ...params,\n    animated: true\n  }, eds)), []);\n  const addChild = parentId => {\n    const newId = Date.now().toString();\n    const parentNode = nodes.find(n => n.id === parentId);\n    const newNode = {\n      id: newId,\n      type: \"chat\",\n      position: {\n        x: parentNode.position.x,\n        y: parentNode.position.y + 250\n      },\n      data: {\n        label: \"New message\"\n      }\n    };\n    setNodes(nds => [...nds, newNode]);\n    setEdges(eds => [...eds, {\n      id: `e${parentId}-${newId}`,\n      source: parentId,\n      target: newId,\n      animated: true\n    }]);\n  };\n  const deleteNode = id => {\n    setNodes(nds => nds.filter(n => n.id !== id));\n    setEdges(eds => eds.filter(e => e.source !== id && e.target !== id));\n  };\n  const nodesWithHandlers = nodes.map(n => ({\n    ...n,\n    data: {\n      ...n.data,\n      onAddChild: addChild,\n      onDelete: deleteNode\n    }\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-screen h-screen bg-neutral-900\",\n    onWheel: handleWheel,\n    children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n      nodes: nodesWithHandlers,\n      edges: edges,\n      onNodesChange: onNodesChange,\n      onEdgesChange: onEdgesChange,\n      onConnect: onConnect,\n      nodeTypes: nodeTypes,\n      fitView: true,\n      zoomOnScroll: false,\n      panOnScroll: false,\n      panOnDrag: true,\n      children: [/*#__PURE__*/_jsxDEV(Background, {\n        gap: 20,\n        size: 1,\n        color: \"#444\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n_s(FlowCanvas, \"KLD5jJX13jbE7JxJyODaD7XZgxw=\", false, function () {\n  return [useReactFlow, useNodesState, useEdgesState];\n});\n_c = FlowCanvas;\nvar _c;\n$RefreshReg$(_c, \"FlowCanvas\");","map":{"version":3,"names":["React","useCallback","ReactFlow","Background","Controls","addEdge","useNodesState","useEdgesState","useReactFlow","ChatNode","jsxDEV","_jsxDEV","FlowCanvas","_s","zoomIn","zoomOut","setViewport","getViewport","handleWheel","event","preventDefault","x","y","zoom","ctrlKey","deltaY","duration","shiftKey","nodeTypes","chat","initialNodes","id","type","position","data","label","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","onConnect","params","eds","animated","addChild","parentId","newId","Date","now","toString","parentNode","find","n","newNode","nds","source","target","deleteNode","filter","e","nodesWithHandlers","map","onAddChild","onDelete","className","onWheel","children","fitView","zoomOnScroll","panOnScroll","panOnDrag","gap","size","color","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/PC/Desktop/projects/larvix/larvix/src/components/FlowCanvas.js"],"sourcesContent":["import React, { useCallback } from \"react\";\r\nimport ReactFlow, {\r\n  Background,\r\n  Controls,\r\n  addEdge,\r\n  useNodesState,\r\n  useEdgesState,\r\n  useReactFlow\r\n} from \"reactflow\";\r\nimport \"reactflow/dist/style.css\";\r\nimport ChatNode from \"../components/ChatNode\";\r\n\r\nfunction FlowCanvas() {\r\n  const { zoomIn, zoomOut, setViewport, getViewport } = useReactFlow();\r\n\r\n  const handleWheel = useCallback(\r\n    (event) => {\r\n      event.preventDefault();\r\n\r\n      const { x, y, zoom } = getViewport();\r\n\r\n      // CTRL + scroll → zoom\r\n      if (event.ctrlKey) {\r\n        event.deltaY < 0\r\n          ? zoomIn({ duration: 100 })\r\n          : zoomOut({ duration: 100 });\r\n        return;\r\n      }\r\n\r\n      // SHIFT + scroll → horizontal\r\n      if (event.shiftKey) {\r\n        setViewport({ x: x - event.deltaY, y, zoom });\r\n        return;\r\n      }\r\n\r\n      // Normal scroll → vertical\r\n      setViewport({ x, y: y - event.deltaY, zoom });\r\n    },\r\n    [getViewport, setViewport, zoomIn, zoomOut]\r\n  );\r\n\r\n  const nodeTypes = { chat: ChatNode };\r\n\r\n  const initialNodes = [\r\n    {\r\n      id: \"1\",\r\n      type: \"chat\",\r\n      position: { x: 400, y: 100 },\r\n      data: { label: \"Root message\" }\r\n    }\r\n  ];\r\n\r\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\r\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\r\n\r\n  const onConnect = useCallback(\r\n    (params) =>\r\n      setEdges((eds) => addEdge({ ...params, animated: true }, eds)),\r\n    []\r\n  );\r\n\r\n  const addChild = (parentId) => {\r\n    const newId = Date.now().toString();\r\n    const parentNode = nodes.find((n) => n.id === parentId);\r\n\r\n    const newNode = {\r\n      id: newId,\r\n      type: \"chat\",\r\n      position: {\r\n        x: parentNode.position.x,\r\n        y: parentNode.position.y + 250\r\n      },\r\n      data: { label: \"New message\" }\r\n    };\r\n\r\n    setNodes((nds) => [...nds, newNode]);\r\n    setEdges((eds) => [\r\n      ...eds,\r\n      {\r\n        id: `e${parentId}-${newId}`,\r\n        source: parentId,\r\n        target: newId,\r\n        animated: true\r\n      }\r\n    ]);\r\n  };\r\n\r\n  const deleteNode = (id) => {\r\n    setNodes((nds) => nds.filter((n) => n.id !== id));\r\n    setEdges((eds) =>\r\n      eds.filter((e) => e.source !== id && e.target !== id)\r\n    );\r\n  };\r\n\r\n  const nodesWithHandlers = nodes.map((n) => ({\r\n    ...n,\r\n    data: {\r\n      ...n.data,\r\n      onAddChild: addChild,\r\n      onDelete: deleteNode\r\n    }\r\n  }));\r\n\r\n  return (\r\n    <div\r\n      className=\"w-screen h-screen bg-neutral-900\"\r\n      onWheel={handleWheel}\r\n    >\r\n      <ReactFlow\r\n        nodes={nodesWithHandlers}\r\n        edges={edges}\r\n        onNodesChange={onNodesChange}\r\n        onEdgesChange={onEdgesChange}\r\n        onConnect={onConnect}\r\n        nodeTypes={nodeTypes}\r\n        fitView\r\n        zoomOnScroll={false}\r\n        panOnScroll={false}\r\n        panOnDrag={true}\r\n      >\r\n        <Background gap={20} size={1} color=\"#444\" />\r\n        <Controls />\r\n      </ReactFlow>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}